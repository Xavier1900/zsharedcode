#summary JQueryElement 日期框 - 日程表
#labels Phase-Implementation
<font face="microsoft yahei">
=== 说明 ===
 下面的例子是一个简单的日程表, 在选择日期后可以保存, 删除和载入此日期的日程. 其中展示了 [JQueryUIDatepicker Datepicker] 控件的属性和事件.

 ==== 设置日期框文本 ====
 通过 [JQueryUIDatepicker Datepicker] 的 DayNames, DayNamesMin, DayNamesShort, MonthNames, MonthNamesShort 属性可以设置日期框的天和月的显示, CurrentText 属性表示转到当前日期按钮的文本, 如果需要显示此按钮还需要将 ShowButtonPanel 属性设置为 True.

 ==== 设置日期框范围 ====
 [JQueryUIDatepicker Datepicker] 的 MaxDate, MinDate 分别表示日期框的可选的最大和最小日期, 比如: {{{<je:Datepicker ID="dp" runat="server" ... MaxDate="+2w" MinDate="-1y"></je:Datepicker>}}}, 这里表示最大日期为当前日期后的 2 周, 最小日期为当前日期前的 1 年.
 
 ==== 设置日期框客户端选择日期事件 ====
 [JQueryUIDatepicker Datepicker] 的 OnSelect 属性为处理选择日期选择事件的 javascript 函数, {{{<je:Datepicker ID="dp" runat="server"... onselect="function(dateText, inst){setDay(inst);}" ...></je:Datepicker>}}}.

 ==== 日期框的其它设置 ====
 ChangeMonth - 是否允许选择月份.
 ChangeYear - 是否允许选择年份.
 SelectOtherMonths - 是否允许选择其它月份.
 ShowOtherMonths - 是否允许显示其它月份.
 
 ==== 参考图片 ====
 [http://zsharedcode.googlecode.com/files/datepicker.design.png]
 [http://zsharedcode.googlecode.com/files/datepicker.runtime.png]

=== datepicker/Default.aspx ===
{{{
<%@ Page Language="C#" %>

<%@ Register Namespace="zoyobar.shared.panzer.ui.jqueryui" TagPrefix="je" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
	<title>JQueryElement 日期框 - 日程表</title>
	<link rel="stylesheet" href="../css/ui-lightness/jquery-ui-1.8.11.custom.css" />
	<script type="text/javascript" src="../js/jquery-1.5.1.min.js"></script>
	<script type="text/javascript" src="../js/jquery-ui-1.8.11.custom.min.js"></script>
</head>
<body>
	<form id="formJE" runat="server">
	<je:JQueryScript ID="script" runat="server">
		<Html>
		<script type="text/javascript">
			var currentDay;

			function setDay(inst) {
				currentDay = inst.currentYear + '-' + inst.currentMonth + '-' + inst.currentDay;
				$('#txtNote').val('');
				$('#lblMessage').html($('#lblMessage').html() + '<br />选择了日期: ' + currentDay);
			}

		</script>
		</Html>
	</je:JQueryScript>
	<je:Datepicker ID="dp" runat="server" ChangeMonth="True" ChangeYear="True" 
		CurrentText="转到选择的日期" onselect="function(dateText, inst){setDay(inst);}" 
		SelectOtherMonths="True" ShowOtherMonths="True" ShowButtonPanel="true" 
		DayNames="['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六']" 
		DayNamesMin="['日', '一', '二', '三', '四', '五', '六']" 
		DayNamesShort="['周日', '周一', '周二', '周三', '周四', '周五', '周六']" 
		MonthNames="['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']" 
		MonthNamesShort="['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']" 
		MaxDate="+2w" MinDate="-1y">
	</je:Datepicker>
	<textarea id="txtNote" rows="20" cols="30"></textarea>
	<je:Button ID="cmdSave" runat="server" Label="保存">
		<ClickAsync Url="datepicker.ashx" Success="
		function(data) {
			$('#lblMessage').html($('#lblMessage').html() + '<br />' + data.result);
		}
		">
			<Parameters>
				<je:ParameterEdit Name="c" Type="Expression" Value="'s'" />
				<je:ParameterEdit Name="t" Value="'#txtNote'" />
				<je:ParameterEdit Name="d" Type="Expression" Value="currentDay" />
			</Parameters>
		</ClickAsync>
	</je:Button>
	<je:Button ID="cmdDelete" runat="server" Label="删除">
		<ClickAsync Url="datepicker.ashx" Success="
		function(data) {
			$('#lblMessage').html($('#lblMessage').html() + '<br />' + data.result);
		}
		">
			<Parameters>
				<je:ParameterEdit Name="c" Type="Expression" Value="'d'" />
				<je:ParameterEdit Name="t" Value="'#txtNote'" />
				<je:ParameterEdit Name="d" Type="Expression" Value="currentDay" />
			</Parameters>
		</ClickAsync>
	</je:Button>
	<je:Button ID="cmdLoad" runat="server" Label="载入">
		<ClickAsync Url="datepicker.ashx" Success="
		function(data) {
			$('#txtNote').val(data.result);
		}
		">
			<Parameters>
				<je:ParameterEdit Name="c" Type="Expression" Value="'l'" />
				<je:ParameterEdit Name="d" Type="Expression" Value="currentDay" />
			</Parameters>
		</ClickAsync>
	</je:Button>
	<p id="lblMessage"></p>
	<p style="font-size: smaller; text-align: right;">版本 2.6, 讨论, 获取 JQueryElement 最新消息, 请加 QQ 群: 149829251 (JQueryElement 编程).</p>
	<p style="font-size: smaller; text-align: right;">
		<a href="http://code.google.com/p/zsharedcode/wiki/JQueryElementDatePickerDoc">代码解释说明</a>
		<a href="http://code.google.com/p/zsharedcode/wiki/JQueryElement">JQueryElement (JE) 成员参考</a><br />
		JE 是 panzer 项目的一部分, 您可以参考 <a href="http://code.google.com/p/zsharedcode/">http://code.google.com/p/zsharedcode/</a>.<br />
		所有示例源码托管地址: <a href="http://panzer.codeplex.com/">http://panzer.codeplex.com/</a>.
	</p>
	</form>
</body>
</html>
}}}

=== datepicker/datepicker.ashx ===
{{{
<%@ WebHandler Language="C#" Class="datepicker" %>

using System;
using System.Web;
using System.Web.SessionState;

public class datepicker : IHttpHandler, IRequiresSessionState
{

	public void ProcessRequest ( HttpContext context )
	{
		context.Response.ContentType = "text/plain";
		context.Response.Cache.SetNoStore ( );

		string result = string.Empty;

		if ( string.IsNullOrEmpty ( context.Request["d"] ) || string.IsNullOrEmpty ( context.Request["t"] ) )
			result = "日期或者内容为空";
		else
			switch ( context.Request["c"] )
			{
				case "l":

					if ( null == context.Session[context.Request["d"]] )
						result = "没有内容" + context.Request["d"];
					else
						result = context.Session[context.Request["d"]].ToString ( );

					break;

				case "s":
					context.Session[context.Request["d"]] = context.Request["t"];
					result = "保存成功" + context.Request["d"];
					break;

				case "d":
					context.Session[context.Request["d"]] = null;
					result = "删除成功" + context.Request["d"];
					break;
			}

		context.Response.Write ( "{\"result\":\"" + result + "\"}" );
	}

	public bool IsReusable
	{
		get { return false; }
	}

}
}}}

=== 前提条件 ===
 所有示例代码可以在 http://panzer.codeplex.com/releases/view/61701#DownloadId=212072 下载. 页面需要添加 [http://jqueryui.com/ jQuery UI] 的脚本和样式.

*注意:* 这里仅列出部分代码, 可能需要您自己创建窗口, 页面等.
</font>